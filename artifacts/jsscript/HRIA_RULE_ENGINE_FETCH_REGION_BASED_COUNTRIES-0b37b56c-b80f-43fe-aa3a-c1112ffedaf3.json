{
	"id": "0b37b56c-b80f-43fe-aa3a-c1112ffedaf3",
	"createdAt": "2022-07-08T16:20:20.555Z",
	"createdBy": "VSawan10",
	"globalScripts": [],
	"externalModules": [],
	"entitySets": [],
	"apis": [],
	"name": "HRIA_RULE_ENGINE_FETCH_REGION_BASED_COUNTRIES",
	"ver": "22.7.8.138",
	"description": "script for fetching region based countries.",
	"content": [
		"==OBJECT STRING==",
		"async function get_region_based_available_countries() {\r",
		"\r",
		"    try {\r",
		"\r",
		"        let startTime = Date.now();\r",
		"        let flag = 'F';\r",
		"\r",
		"\r",
		"        let region = req.body.region ? req.body.region : '';\r",
		"        //console.log(typeof (region))\r",
		"\r",
		"        if (region === '') {\r",
		"\r",
		"            result = {\r",
		"                statusFlag: flag,\r",
		"                queryMsg: 'operation completed in ' + ((Date.now() - startTime) / 1000) + ' seconds',\r",
		"                message: 'Please have region selected'\r",
		"            }\r",
		"            complete();\r",
		"            return;\r",
		"\r",
		"        }\r",
		"\r",
		"\r",
		"        /*\r",
		"        input facts\r",
		"        \r",
		"        const facts = {\r",
		"            region: region,\r",
		"        };\r",
		"        */\r",
		"\r",
		"        /*\r",
		"        Does this Rule Id or name has to be static or can be passed dynamically?\r",
		"        is the static passing worth or switch to dynamic approach.\r",
		"        OR\r",
		"        maintaining config table with the Rule Names & their UUIDs.\r",
		"        */\r",
		"\r",
		"        /*\r",
		"        parameters:\r",
		"        2 inputs -- facts && rule definition\r",
		"        */\r",
		"        //const regBasedCountries = await p9.rulesengine.execute(facts, '60644c64-3a9c-4890-9e60-e89a399c8908');\r",
		"\r",
		"        //OR\r",
		"        const regBasedCountries = await p9.rulesengine.execute({ region: region }, '60644c64-3a9c-4890-9e60-e89a399c8908');\r",
		"        flag = 'S';\r",
		"\r",
		"        /*\r",
		"        TECH TEAM NOTES:\r",
		"        output of this rule engine is 'String'\r",
		"        is this has to be always String or can be else? explore possibilities, R&D needed\r",
		"        */\r",
		"\r",
		"\r",
		"        //console.log(typeof (regBasedCountries))\r",
		"\r",
		"        result = {\r",
		"            queryMsg: 'operation completed in ' + ((Date.now() - startTime) / 1000) + ' seconds',\r",
		"            regionBasedCountries: regBasedCountries,\r",
		"            statusFlag: flag\r",
		"        }\r",
		"\r",
		"        console.log(result);\r",
		"\r",
		"\r",
		"        log.info('[HRIA_GET_REGION_BASED_COUNTRIES] script executed & found following countries countries - ' + regBasedCountries)\r",
		"        complete();\r",
		"\r",
		"    } catch (err) {\r",
		"\r",
		"        log.error('[HRIA_GET_REGION_BASED_COUNTRIES] script execution failed due to -- ' + err)\r",
		"        fail();\r",
		"    }\r",
		"\r",
		"}\r",
		"\r",
		"await get_region_based_available_countries();\r",
		"\r",
		"\r",
		""
	],
	"useAsGlobalScript": false,
	"isTypescript": false,
	"transpiledContent": null,
	"lastRunSuccessful": true,
	"jsscriptGroup": "7584c1f8-716a-4e65-a26f-b5719d3ec8b8",
	"package": "b1c5d619-3e13-4bbb-875e-88eb3d2c34f7"
}